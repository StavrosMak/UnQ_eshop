{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { useQuery } from 'react-query';\nconst useAPI = _ref => {\n  _s();\n  let {\n    url\n  } = _ref;\n  const [selectedCategories, setSelectedCategories] = useState([]);\n  const fetchProducts = async () => {\n    const response = await fetch(url);\n    // const response = await fetch('https://fakestoreapi.com/products');\n    const data = await response.json();\n    return data;\n  };\n  const handleCategoryChange = selectedCategories => {\n    setSelectedCategories(selectedCategories);\n  };\n  const {\n    data: products,\n    isLoading\n  } = useQuery('products', fetchProducts, {\n    staleTime: 1000 * 60 * 10\n  });\n  const filteredProducts = selectedCategories.length > 0 && products ? products.filter(product => selectedCategories.includes(product.category)) : products && products.filter(product => [\"men's clothing\", \"women's clothing\", 'jewelery'].includes(product.category));\n  return {\n    handleCategoryChange,\n    products: filteredProducts,\n    isLoading\n  };\n};\n_s(useAPI, \"nV1Tyu0b8Wcz2Cz9bj5nZuXooRo=\", false, function () {\n  return [useQuery];\n});\nexport default useAPI;","map":{"version":3,"names":["useState","useQuery","useAPI","_ref","_s","url","selectedCategories","setSelectedCategories","fetchProducts","response","fetch","data","json","handleCategoryChange","products","isLoading","staleTime","filteredProducts","length","filter","product","includes","category"],"sources":["/home/stv/Documents/Web/React/ecommerce/src/CustomHooks/useAPI.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useQuery } from 'react-query';\n\n\nconst useAPI = ({url}) => {\n\n\n    const [selectedCategories, setSelectedCategories] = useState([]);\n\n\n    const fetchProducts = async () => {\n        const response = await fetch(url);\n        // const response = await fetch('https://fakestoreapi.com/products');\n        const data = await response.json();\n        return data;\n    };\n\n    const handleCategoryChange = (selectedCategories) => {\n        setSelectedCategories(selectedCategories);\n    };\n\n    const { data: products, isLoading } = useQuery('products', fetchProducts, {\n        staleTime: 1000 * 60 * 10\n    });\n\n\n\n    const filteredProducts = selectedCategories.length > 0 && products\n        ? products.filter((product) => selectedCategories.includes(product.category))\n        : products && products.filter((product) => [\"men's clothing\", \"women's clothing\", 'jewelery'].includes(product.category));\n\n\n    return {\n\n        handleCategoryChange,\n        products: filteredProducts,\n        isLoading\n    };\n};\n\nexport default useAPI;"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,SAASC,QAAQ,QAAQ,aAAa;AAGtC,MAAMC,MAAM,GAAGC,IAAA,IAAW;EAAAC,EAAA;EAAA,IAAV;IAACC;EAAG,CAAC,GAAAF,IAAA;EAGjB,MAAM,CAACG,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAGhE,MAAMQ,aAAa,GAAG,MAAAA,CAAA,KAAY;IAC9B,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACL,GAAG,CAAC;IACjC;IACA,MAAMM,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,EAAE;IAClC,OAAOD,IAAI;EACf,CAAC;EAED,MAAME,oBAAoB,GAAIP,kBAAkB,IAAK;IACjDC,qBAAqB,CAACD,kBAAkB,CAAC;EAC7C,CAAC;EAED,MAAM;IAAEK,IAAI,EAAEG,QAAQ;IAAEC;EAAU,CAAC,GAAGd,QAAQ,CAAC,UAAU,EAAEO,aAAa,EAAE;IACtEQ,SAAS,EAAE,IAAI,GAAG,EAAE,GAAG;EAC3B,CAAC,CAAC;EAIF,MAAMC,gBAAgB,GAAGX,kBAAkB,CAACY,MAAM,GAAG,CAAC,IAAIJ,QAAQ,GAC5DA,QAAQ,CAACK,MAAM,CAAEC,OAAO,IAAKd,kBAAkB,CAACe,QAAQ,CAACD,OAAO,CAACE,QAAQ,CAAC,CAAC,GAC3ER,QAAQ,IAAIA,QAAQ,CAACK,MAAM,CAAEC,OAAO,IAAK,CAAC,gBAAgB,EAAE,kBAAkB,EAAE,UAAU,CAAC,CAACC,QAAQ,CAACD,OAAO,CAACE,QAAQ,CAAC,CAAC;EAG7H,OAAO;IAEHT,oBAAoB;IACpBC,QAAQ,EAAEG,gBAAgB;IAC1BF;EACJ,CAAC;AACL,CAAC;AAACX,EAAA,CAlCIF,MAAM;EAAA,QAiB8BD,QAAQ;AAAA;AAmBlD,eAAeC,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}