{"ast":null,"code":"import _toConsumableArray from\"/home/stv/Documents/Web/React/ecommerce/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/home/stv/Documents/Web/React/ecommerce/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/stv/Documents/Web/React/ecommerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';var useCart=function useCart(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),cartVisible=_useState4[0],setCartVisible=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),cartLength=_useState6[0],setCartLength=_useState6[1];useEffect(function(){//!init\nvar initialCart=JSON.parse(localStorage.getItem('cart'))||[];setCart(initialCart);},[]);useEffect(function(){//!setItem to localStorage\nlocalStorage.setItem('cart',JSON.stringify(cart));setCartLength(cart.reduce(function(total,item){return total+item.quantity;},0));},[cart]);var handleAddToCart=function handleAddToCart(item){//!Add to cart \nvar existingItem=cart.find(function(cartItem){return cartItem.id===item.id;});if(existingItem){setCart(cart.map(function(cartItem){return cartItem.id===item.id?_objectSpread(_objectSpread({},cartItem),{},{quantity:cartItem.quantity+1}):cartItem;}));}else{setCart([].concat(_toConsumableArray(cart),[_objectSpread(_objectSpread({},item),{},{quantity:1})]));}};var toggleCart=function toggleCart(){//! Toggle cart\nsetCartVisible(!cartVisible);};var handleQuantityChange=function handleQuantityChange(item,change){//! Handle Quantity\nvar updatedCart=_toConsumableArray(cart);var updatedItemIndex=updatedCart.findIndex(function(cartItem){return cartItem.id===item.id;});var updatedItem=_objectSpread({},updatedCart[updatedItemIndex]);updatedItem.quantity+=change;updatedItem.quantity<=0?updatedCart.splice(updatedItemIndex,1):updatedCart[updatedItemIndex]=updatedItem;setCart(updatedCart);setCartLength(updatedCart.reduce(function(total,item){return total+item.quantity;},0));};return{handleAddToCart:handleAddToCart,handleQuantityChange:handleQuantityChange,toggleCart:toggleCart,setCartLength:setCartLength,setCart:setCart,cart:cart,cartLength:cartLength,cartVisible:cartVisible,setCartVisible:setCartVisible};};export default useCart;","map":{"version":3,"names":["useState","useEffect","useCart","_useState","_useState2","_slicedToArray","cart","setCart","_useState3","_useState4","cartVisible","setCartVisible","_useState5","_useState6","cartLength","setCartLength","initialCart","JSON","parse","localStorage","getItem","setItem","stringify","reduce","total","item","quantity","handleAddToCart","existingItem","find","cartItem","id","map","_objectSpread","concat","_toConsumableArray","toggleCart","handleQuantityChange","change","updatedCart","updatedItemIndex","findIndex","updatedItem","splice"],"sources":["/home/stv/Documents/Web/React/ecommerce/src/CustomHooks/useCart.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst useCart = () => {\n    const [cart, setCart] = useState([]);\n    const [cartVisible, setCartVisible] = useState(false);\n    const [cartLength, setCartLength] = useState(0);\n\n\n    useEffect(() => { //!init\n        const initialCart = JSON.parse(localStorage.getItem('cart')) || [];\n        setCart(initialCart);\n    }, []);\n\n\n\n    useEffect(() => { //!setItem to localStorage\n        localStorage.setItem('cart', JSON.stringify(cart));\n        setCartLength(cart.reduce((total, item) => total + item.quantity, 0));\n\n    }, [cart]);\n\n\n    const handleAddToCart = (item) => { //!Add to cart \n        const existingItem = cart.find((cartItem) => cartItem.id === item.id);\n\n        if (existingItem) {\n            setCart(cart.map((cartItem) => (cartItem.id === item.id ? { ...cartItem, quantity: cartItem.quantity + 1 } : cartItem)));\n        } else {\n            setCart([...cart, { ...item, quantity: 1 }]);\n        }\n    };\n\n\n    const toggleCart = () => { //! Toggle cart\n        setCartVisible(!cartVisible);\n    };\n\n\n    const handleQuantityChange = (item, change) => { //! Handle Quantity\n        const updatedCart = [...cart];\n        const updatedItemIndex = updatedCart.findIndex((cartItem) => cartItem.id === item.id);\n        const updatedItem = { ...updatedCart[updatedItemIndex] };\n        updatedItem.quantity += change;\n        updatedItem.quantity <= 0 ? updatedCart.splice(updatedItemIndex, 1) : (updatedCart[updatedItemIndex] = updatedItem);\n        setCart(updatedCart);\n        setCartLength(updatedCart.reduce((total, item) => total + item.quantity, 0));\n    };\n\n\n    return { handleAddToCart, handleQuantityChange, toggleCart, setCartLength, setCart, cart, cartLength, cartVisible, setCartVisible };\n};\n\nexport default useCart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}