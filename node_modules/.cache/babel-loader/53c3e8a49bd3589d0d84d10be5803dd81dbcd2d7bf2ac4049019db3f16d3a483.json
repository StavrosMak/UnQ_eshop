{"ast":null,"code":"import _regeneratorRuntime from\"/home/stv/Documents/Web/React/ecommerce/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/stv/Documents/Web/React/ecommerce/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/stv/Documents/Web/React/ecommerce/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useQuery}from'react-query';// const useAPI = () => {\nvar useAPI=function useAPI(url){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),selectedCategories=_useState2[0],setSelectedCategories=_useState2[1];var fetchProducts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url);case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;return _context.abrupt(\"return\",data);case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchProducts(){return _ref.apply(this,arguments);};}();var handleCategoryChange=function handleCategoryChange(selectedCategories){setSelectedCategories(selectedCategories);};var _useQuery=useQuery('products',fetchProducts,{staleTime:1000*60*10}),products=_useQuery.data,isLoading=_useQuery.isLoading;var filteredProducts=selectedCategories.length>0&&products?products.filter(function(product){return selectedCategories.includes(product.category);}):products&&products.filter(function(product){return[\"men's clothing\",\"women's clothing\",'jewelery'].includes(product.category);});return{handleCategoryChange:handleCategoryChange,products:filteredProducts,isLoading:isLoading};};export default useAPI;","map":{"version":3,"names":["useState","useQuery","useAPI","url","_useState","_useState2","_slicedToArray","selectedCategories","setSelectedCategories","fetchProducts","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","json","abrupt","stop","apply","arguments","handleCategoryChange","_useQuery","staleTime","products","isLoading","filteredProducts","length","filter","product","includes","category"],"sources":["/home/stv/Documents/Web/React/ecommerce/src/CustomHooks/useAPI.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useQuery } from 'react-query';\n\n\n// const useAPI = () => {\nconst useAPI = (url) => {\n\n\n    const [selectedCategories, setSelectedCategories] = useState([]);\n\n\n    const fetchProducts = async () => {\n        const response = await fetch(url);\n        // const response = await fetch('https://fakestoreapi.com/products');\n        const data = await response.json();\n        return data;\n    };\n\n    const handleCategoryChange = (selectedCategories) => {\n        setSelectedCategories(selectedCategories);\n    };\n\n    const { data: products, isLoading } = useQuery('products', fetchProducts, {\n        staleTime: 1000 * 60 * 10\n    });\n\n\n\n    const filteredProducts = selectedCategories.length > 0 && products\n        ? products.filter((product) => selectedCategories.includes(product.category))\n        : products && products.filter((product) => [\"men's clothing\", \"women's clothing\", 'jewelery'].includes(product.category));\n\n\n    return {\n\n        handleCategoryChange,\n        products: filteredProducts,\n        isLoading\n    };\n};\n\nexport default useAPI;"],"mappings":"uYAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,OAASC,QAAQ,KAAQ,aAAa,CAGtC;AACA,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAIC,GAAG,CAAK,CAGpB,IAAAC,SAAA,CAAoDJ,QAAQ,CAAC,EAAE,CAAC,CAAAK,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAzDG,kBAAkB,CAAAF,UAAA,IAAEG,qBAAqB,CAAAH,UAAA,IAGhD,GAAM,CAAAI,aAAa,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACK,CAAAC,KAAK,CAACnB,GAAG,CAAC,QAA3BY,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CAAAJ,QAAA,CAAAE,IAAA,SAEK,CAAAN,QAAQ,CAACS,IAAI,EAAE,QAA5BR,IAAI,CAAAG,QAAA,CAAAI,IAAA,QAAAJ,QAAA,CAAAM,MAAA,UACHT,IAAI,0BAAAG,QAAA,CAAAO,IAAA,MAAAZ,OAAA,GACd,kBALK,CAAAL,aAAaA,CAAA,SAAAC,IAAA,CAAAiB,KAAA,MAAAC,SAAA,OAKlB,CAED,GAAM,CAAAC,oBAAoB,CAAG,QAAvB,CAAAA,oBAAoBA,CAAItB,kBAAkB,CAAK,CACjDC,qBAAqB,CAACD,kBAAkB,CAAC,CAC7C,CAAC,CAED,IAAAuB,SAAA,CAAsC7B,QAAQ,CAAC,UAAU,CAAEQ,aAAa,CAAE,CACtEsB,SAAS,CAAE,IAAI,CAAG,EAAE,CAAG,EAC3B,CAAC,CAAC,CAFYC,QAAQ,CAAAF,SAAA,CAAdd,IAAI,CAAYiB,SAAS,CAAAH,SAAA,CAATG,SAAS,CAMjC,GAAM,CAAAC,gBAAgB,CAAG3B,kBAAkB,CAAC4B,MAAM,CAAG,CAAC,EAAIH,QAAQ,CAC5DA,QAAQ,CAACI,MAAM,CAAC,SAACC,OAAO,QAAK,CAAA9B,kBAAkB,CAAC+B,QAAQ,CAACD,OAAO,CAACE,QAAQ,CAAC,GAAC,CAC3EP,QAAQ,EAAIA,QAAQ,CAACI,MAAM,CAAC,SAACC,OAAO,QAAK,CAAC,gBAAgB,CAAE,kBAAkB,CAAE,UAAU,CAAC,CAACC,QAAQ,CAACD,OAAO,CAACE,QAAQ,CAAC,GAAC,CAG7H,MAAO,CAEHV,oBAAoB,CAApBA,oBAAoB,CACpBG,QAAQ,CAAEE,gBAAgB,CAC1BD,SAAS,CAATA,SACJ,CAAC,CACL,CAAC,CAED,cAAe,CAAA/B,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}